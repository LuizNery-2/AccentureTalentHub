<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="description" content="">
	<meta name="keywords" content="palavras,separadas,por,vírgulas">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0">
	<title>AccentureTalentHub | Cursos</title>
	<link rel="shortcut icon" href="../static/img/logo_accenture.png" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="../static/css/geralstyle.css">
    <link rel="stylesheet" type="text/css" href="../static/css/perfil.css">
    <link rel="stylesheet" type="text/css" href="../static/css/curso.css">


    <!-- Importação dos arquivos CSS para barra de pesquisa -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <!-- Importação dos arquivos Jquary -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>
<body id="">
    <main>
        <nav>
            
    
            <ul style="margin-top: 10%;">
                <li id="icon_usuario_menu" class="lista_dashboard" >
                    <a href="#">
                        <img class="icon_menu" src="../static/img/icon_perfil_action.png">
                    </a>
                </li>
            </ul>
        </nav>
    
        <section id="box_info_dashboard">

            <header style="text-align: left; display: block;">
                <h1 id="title_curso" style="text-align: left;">Admistrador</h1>
            </header>

        </section>

            <div style="margin-left: 20%; margin-top: 0px; margin-bottom: 2%;" id="box_carreira">
                <div style="display: flex;">
                    <div style="width: 50%;"></div>
                    <h2>Cadastrar novo usuário</h2>
                </div>
                <div id="box_info_metas">
                    <p style="color: #E1BBFD;">Dados</p>
                    <form id="formCadastro">
                        <div class="box_metas">
                            <p>Nome: </p>
                            <input id="nome" class="input_cadastro" type="text">
                        </div>
                        <div class="box_metas">
                            <p>Cargo: </p>
                            <input id="cargo" class="input_cadastro" type="text">
                        </div>
                        <div class="box_metas">
                            <p>E-mail: </p>
                            <input id="email" class="input_cadastro" type="email">
                        </div>
                        <div class="box_metas">
                            <p>Foto: </p>
                            <input id="foto" class="input_cadastro" type="text">
                        </div>
                        <div class="box_metas">
                            <p>Usuário: </p>
                            <input id="usuario" class="input_cadastro" type="text">
                        </div>
                        <div class="box_metas">
                            <p>Senha: </p>
                            <input id="senha" class="input_cadastro" type="password" placeholder="Senha padrão: Mudar@123">
                        </div>
                        <div class="box_metas">
                            <p>Nível de Usuário : </p>
                            <input id="nivelUsuario" class="input_cadastro" type="number" placeholder="(Adm = 0, Líder = 1, Líderado = 2)">
                        </div>
                        <input type="submit">
                    </form>
                    
                </div>

                
            </div>
    </main>

    
    
    <footer class="footer_geral">
        <p>© 2023 AccentureTalentHub.Inc | Todos os direitos reservados </p>
    </footer>

    <script>
        $(document).ready(function(){
            $(".button_carreira").click(function() {
                $(".modal-senha").css("display", "flex");
                $("#box_info_dashboard").css("opacity", "0.5");
            });
            
            $("#fechar_modal-senha").click(function() {
                $(".modal-senha").css("display", "none");
                $("#box_info_dashboard").css("opacity", "1");
            })
        });
    </script>


<script>
    // document.addEventListener("DOMContentLoaded", function() {
        
    //     formCadastro.addEventListener('submit', function(event) {
    //         event.preventDefault(); // Evita o comportamento padrão do formulário

            
    //         const nome = document.querySelector('#nome').value;
    //         const cargo = document.querySelector('#cargo').value;
    //         const foto = document.querySelector('#foto').value;
    //         const usuario = document.querySelector('#usuario').value;
    //         const email = document.querySelector('#email').value;
    //         const nivelUsuario = document.querySelector('#nivelUsuario').value;
    //         const senha = document.querySelector('#senha').value;
    //         // Construa o objeto de dados a ser enviado para a API
    //         const data = {
    //             cargo: cargo,
    //             foto: foto,
    //             pontuacaoGeral: 0,
    //             nivel: 0,
    //             nivelInteresse: 0,
    //             nome: nome,
    //             usuario: usuario,
    //             email: email,
    //             nivelUsuario: nivelUsuario,
    //             senha: senha
    //         };

    //         fetch('http://localhost:8080/usuario', {
    //             method: 'POST',
    //             headers: {
    //                 'Content-Type': 'application/json'
    //             },
    //             body: JSON.stringify(data)
    //         })
    //         .then(response => response.json())
    //         .then(data => {
    //             alert(data.idUsuario);
    //             localStorage.setItem('idUsuario', data.idUsuario)
    //             alert('Cadastro realizado com sucesso');
    //             window.location = 'adm.html';
    //         })
    //         .catch(error => {
    //             console.error('Erro ao cadastrar usuário:', error);
                
    //         });
    //     });

    //     fetch("http://localhost:8080/salas", {
    //                 method: "POST",
    //                 headers: {
    //                     "Accept": "application/json",
    //                     "Content-Type": "application/json"
    //                 },
    //                 body: JSON.stringify({
    //                     descricao: "Aqui posso desenvolver e aprimorar minhas habilidades pessoais",
    //                     nome: "Minha sala de aula",
    //                     banner: "https://scontent.frec36-1.fna.fbcdn.net/v/t39.30808-6/408962814_666709105661606_5946856328400795486_n.jpg?_nc_cat=103&ccb=1-7&_nc_sid=3635dc&_nc_ohc=87AsznTaC0gAX9BeCn-&_nc_ht=scontent.frec36-1.fna&oh=00_AfA3QkyvA4U8_2HzdFpLo8YxZxgO0SZSWtq-M-Q5Lx-z1w&oe=6575E1F9"

    //                 })
    //             })
    //             .then(function (res) {
    //                 if (res.ok) {
    //                     return res.text(); // Retorna o corpo da resposta como texto
    //                 } else {
    //                     throw new Error("Erro ao criar sala. Por favor, tente novamente.");
    //                 }
    //             })
    //             .then(function (idSala) {
    //                 alert("Sala criada com sucesso!");
    //                 localStorage.setItem('idSala', idSala);
    //                 // Aqui você pode fazer algo com o ID da sala, se necessário
    //             })
    //             .catch(function (error) {
    //                 console.error("Erro na solicitação: " + error);
    //             });


    //             const idSala = localStorage.getItem('idSala');

    //             // Remover aspas duplas se presentes
    //             const IdSala = idSala.replace(/"/g, '');

    //             const url = "http://localhost:8080/usuariosSalas/" + IdSala;

                
    //             const arrayiD = [localStorage.getItem('idUsuario')];
    //             alert(arrayiD);
    //             // Enviar os IDs dos usuários selecionados para o servidor
    //             fetch(url,{
    //                 method: "POST",
    //                 headers: {
    //                     "Content-Type": "application/json",
    //                 },
    //                 body: JSON.stringify(arrayiD),
    //             })
    //             .then(response => response.text())
    //             .then(data => console.log(data))
    //             .catch(error => console.error('Erro ao enviar usuários selecionados:', error));
    // });

    document.addEventListener("DOMContentLoaded", async function() {
    formCadastro.addEventListener('submit', async function(event) {
        event.preventDefault(); // Evita o comportamento padrão do formulário

        const nome = document.querySelector('#nome').value;
        const cargo = document.querySelector('#cargo').value;
        const foto = document.querySelector('#foto').value;
        const usuario = document.querySelector('#usuario').value;
        const email = document.querySelector('#email').value;
        const nivelUsuario = document.querySelector('#nivelUsuario').value;
        const senha = document.querySelector('#senha').value;

        const data = {
            cargo: cargo,
            foto: foto,
            pontuacaoGeral: 0,
            nivel: 0,
            nivelInteresse: 0,
            nome: nome,
            usuario: usuario,
            email: email,
            nivelUsuario: nivelUsuario,
            senha: senha
        };

        try {
            const response = await fetch('http://localhost:8080/usuario', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            const responseData = await response.json();

            if (response.ok) {
                localStorage.setItem('idUsuario', responseData.idUsuario);
                alert('Cadastro realizado com sucesso');
                window.location = 'adm.html';
            }
            
        } catch (error) {
            console.error('Erro ao cadastrar usuário:', error);
        }
    });

    try {
        const response = await fetch("http://localhost:8080/salas", {
            method: "POST",
            headers: {
                "Accept": "application/json",
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                descricao: "Aqui posso desenvolver e aprimorar minhas habilidades pessoais",
                nome: "Minha sala de aula",
                banner: "https://scontent.frec36-1.fna.fbcdn.net/v/t39.30808-6/408962814_666709105661606_5946856328400795486_n.jpg?_nc_cat=103&ccb=1-7&_nc_sid=3635dc&_nc_ohc=87AsznTaC0gAX9BeCn-&_nc_ht=scontent.frec36-1.fna&oh=00_AfA3QkyvA4U8_2HzdFpLo8YxZxgO0SZSWtq-M-Q5Lx-z1w&oe=6575E1F9"
            })
        });

        if (response.ok) {
            const idSala = await response.text();
            alert("Sala criada com sucesso!");
            localStorage.setItem('idSala', idSala);
        } else {
            throw new Error("Erro ao criar sala. Por favor, tente novamente.");
        }

        const idSala = localStorage.getItem('idSala');
        const IdSala = idSala.replace(/"/g, '');
        const url = "http://localhost:8080/usuariosSalas/" + IdSala;
        const arrayiD = [localStorage.getItem('idUsuario')];
        

        try {
            const response = await fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(arrayiD),
            });

            const responseData = await response.text();
            alert(responseData);
        } catch (error) {
            console.error('Erro ao enviar usuários selecionados:', error);
        }
    } catch (error) {
        console.error("Erro na solicitação: " + error);
    }
});

</script>

</body>
</html>